<!DOCTYPE html>
<html xmlnx:th="http://www.thymeleaf.org">
<head th:include="common/include :: header"></head>
<style type="text/css">
    .my-layui-tree-txt-active{
        color: #FF03F0;
    }
</style>
<body>
<div class="layui-form">
    <button class="layui-btn layui-btn-sm layui-btn-normal refreshBtn"><i class="layui-icon layui-icon-refresh-3"></i>刷新</button>
    <button id="openAddLayer"  class="layui-btn layui-btn-sm layui-btn-normal openAddLayer"><i class="layui-icon layui-icon-add-1"></i>添加</button>
    <button id="deleteLayer"  class="layui-btn layui-btn-sm layui-btn-normal openAddLayer"><i class="layui-icon layui-icon-delete"></i>删除</button>
    <button id="openEditLayer"  class="layui-btn layui-btn-sm layui-btn-normal openAddLayer"><i class="layui-icon layui-icon-edit"></i>编辑</button>
</div>
<div class="layui-fluid">
    <div class="layui-row">
        <div id="tree" class="layui-col-md4" >

        </div>
        <div class=" layui-col-md8">
            <table class="layui-table" id="tableData" lay-filter="tableData" >

            </table>
        </div>
    </div>

</div>


</body>
<script th:inline="javascript">
    var sysMenuList = [[${sysMenuList}]];

    layui.use(['tree','layer','form','table'],function() {
        var tree = layui.tree;
        var layer = layui.layer;
        var $ = layui.jquery;
        var table = layui.table;
        var menu = "";
        tree.render({
            elem:"#tree",
            data:sysMenuList,
            click:function (obj) {
                $(".layui-tree-txt").removeClass("my-layui-tree-txt-active");
                obj.elem.find(".layui-tree-txt:first").addClass("my-layui-tree-txt-active");
                menu = obj.data;
            }
        });
        table.render({
            elem:'#tableData',
            url:ctx+"sys/sysMenu/pageList",
            skin: 'row', //列边框风格
            even: true ,//开启隔行背景
            title:'签约统计表',
            page:{theme:'#1E9FFF'},
            limit:50,
            limits:[20,50,100,500],
            height:'full-70',
        });


        $("#openAddLayer").click(function (){
            layer.open({
                type:2,
                title:'添加菜单',
                content:ctx+'sys/sysMenu/addOrEditInit?parentId='+menu.id,
                area:['1000px','600px'],
                maxmin:true,
                fixed: false  //不固定
            });
        });
        $("#openEditLayer").click(function () {
            if(!menu){
                layer.open({
                   title:"提示！",
                    content:"请选择上一级菜单"
                });
            }else {
                layer.open({
                    type:2,
                    title:'编辑菜单',
                    content:ctx+'sys/sysMenu/addOrEditInit?id='+menu.id,
                    area:['1000px','600px'],
                    maxmin:true,
                    fixed: false  //不固定
                });
            }

        });
        $("#deleteLayer").click(function () {
            if(!menu){
                layer.open({
                    title:"提示！",
                    content:"请选择要删除内容"
                });
            }else{
                layer.open({
                    title:"提示！",
                    content:"请选择要删除内容"
                });
            }
        });

    });
</script>
</html>