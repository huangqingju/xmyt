<!DOCTYPE html>
<html xmlnx:th="http://www.thymeleaf.org">
<head th:include="common/include :: header"></head>
<body>
<div class="layui-form">
    <button class="layui-btn layui-btn-sm layui-btn-normal refreshBtn"><i class="layui-icon layui-icon-refresh-3"></i>刷新</button>
    <button id="openAddLayer"  class="layui-btn layui-btn-sm layui-btn-normal openAddLayer"><i class="layui-icon layui-icon-add-1"></i>添加</button>
    <button id="exportXls" class="layui-btn layui-btn-sm layui-btn-normal "  ><i class="layui-icon layui-icon-export"></i>导出</button>
</div>
<div id="tableList" style="" >
    <table id="tableData" lay-filter="tableData" class="layui-tab" >

    </table>
</div>
<script type="text/html" id="toolbar">
    <a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="edit">修改</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="delete">删除</a>
</script>
<script th:inline="javascript">
    layui.use(['table','layer','form'],function(){
        var table = layui.table;
        var layer = layui.layer;
        var $ = layui.jquery;
        var from = layui.form;

        var tableObj = table.render({
            elem:'#tableData',
            url:ctx+"sys/userManage/userList",
            skin: 'row', //列边框风格
            even: true ,//开启隔行背景
            title:'签约统计表',
            page:{theme:'#1E9FFF'},
            limit:50,
            limits:[20,50,100,500],
            height:'full-70',
            parseData:function(res){
                console.log(res);
            },
            cols: [ [
                {checkbox: true, fixed: true},

                {field:'id',title:'唯一ID' ,align:'center',width:100},
                {field:'username',title:'名字', align:'center',width:110},
                {field:'status',title:'状态', align:'center',width:350,templet:function (obj) {
                    var html = '<input type="checkbox"  lay-skin="switch" lay-text="可用|停用" ';
                        html += obj.status ? " checked />":"/>";
                        return  html;
                    }},
                {title:'操作',fixed: 'right', width:150, align:'center', toolbar: '#toolbar'}

            ] ]
        });

        table.on('tool(tableData)',function(obj){
            var data = obj.data; //获得当前行数据
            var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）
            if(layEvent =='edit'){
                layer.open({
                    type:2,
                    title:'添加人员',
                    content:ctx+'sys/userManage/addOrEditInit?id='+data.id,
                    area:['1000px','600px'],
                    maxmin:true,
                    fixed: false  //不固定
                })
            }
        });

        $("#openAddLayer").click(function (){
            layer.open({
                type:2,
                title:'添加人员',
                content:ctx+'sys/userManage/addOrEditInit',
                area:['1000px','600px'],
                maxmin:true,
                fixed: false  //不固定
            })
        })
    });
</script>
</body>
</html>